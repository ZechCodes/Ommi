
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="An OMM (object model mapper) for the 80% case, providing a consistent interface across database choices.">
      
      
        <meta name="author" content="Zech Zimmerman">
      
      
      
        <link rel="prev" href="../overview/">
      
      
        <link rel="next" href="../drivers/">
      
      
      <link rel="icon" href="../../assets/favicon.svg">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>Core - Ommi: Friendlier Databases</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="pink">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#core-api" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Ommi: Friendlier Databases" class="md-header__button md-logo" aria-label="Ommi: Friendlier Databases" data-md-component="logo">
      
  <img src="../../assets/logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Ommi: Friendlier Databases
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Core
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="pink"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="lime"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/ZechCodes/Ommi" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    ZechCodes/Ommi
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../getting-started/" class="md-tabs__link">
        
  
  
    
  
  Getting Started

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../usage/models/" class="md-tabs__link">
          
  
  
  Usage Tutorials

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../overview/" class="md-tabs__link">
          
  
  
  API Reference

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Ommi: Friendlier Databases" class="md-nav__button md-logo" aria-label="Ommi: Friendlier Databases" data-md-component="logo">
      
  <img src="../../assets/logo.svg" alt="logo">

    </a>
    Ommi: Friendlier Databases
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/ZechCodes/Ommi" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    ZechCodes/Ommi
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Usage Tutorials
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Usage Tutorials
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../usage/models/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Models
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../usage/lazy-fields/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lazy Fields (Query Fields)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../usage/association-tables/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Association Tables
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../usage/model-collections/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Model Collections
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../usage/handling-results/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Handling Results
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Core
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Core
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#ommi.database.Ommi" class="md-nav__link">
    <span class="md-ellipsis">
      Ommi
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Ommi">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ommi.database.Ommi.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ommi.database.Ommi.add" class="md-nav__link">
    <span class="md-ellipsis">
      add
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ommi.database.Ommi.find" class="md-nav__link">
    <span class="md-ellipsis">
      find
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ommi.database.Ommi.use_models" class="md-nav__link">
    <span class="md-ellipsis">
      use_models
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ommi.database.Ommi.remove_models" class="md-nav__link">
    <span class="md-ellipsis">
      remove_models
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ommi.database.Ommi.transaction" class="md-nav__link">
    <span class="md-ellipsis">
      transaction
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ommi.database.Ommi.__aenter__" class="md-nav__link">
    <span class="md-ellipsis">
      __aenter__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ommi.database.Ommi.__aexit__" class="md-nav__link">
    <span class="md-ellipsis">
      __aexit__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ommi.database.OmmiTransaction" class="md-nav__link">
    <span class="md-ellipsis">
      OmmiTransaction
    </span>
  </a>
  
    <nav class="md-nav" aria-label="OmmiTransaction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ommi.database.OmmiTransaction--warning" class="md-nav__link">
    <span class="md-ellipsis">
      Warning
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ommi.database.OmmiTransaction.transaction" class="md-nav__link">
    <span class="md-ellipsis">
      transaction
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ommi.database.OmmiTransaction.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ommi.database.OmmiTransaction.add" class="md-nav__link">
    <span class="md-ellipsis">
      add
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ommi.database.OmmiTransaction.find" class="md-nav__link">
    <span class="md-ellipsis">
      find
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ommi.database.OmmiTransaction.use_models" class="md-nav__link">
    <span class="md-ellipsis">
      use_models
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ommi.database.OmmiTransaction.remove_models" class="md-nav__link">
    <span class="md-ellipsis">
      remove_models
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ommi.database.OmmiTransaction.commit" class="md-nav__link">
    <span class="md-ellipsis">
      commit
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ommi.database.OmmiTransaction.rollback" class="md-nav__link">
    <span class="md-ellipsis">
      rollback
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ommi.database.OmmiTransaction.__aenter__" class="md-nav__link">
    <span class="md-ellipsis">
      __aenter__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ommi.database.OmmiTransaction.__aexit__" class="md-nav__link">
    <span class="md-ellipsis">
      __aexit__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../drivers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Drivers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../models/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Models & Fields
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ommi_model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OmmiModel
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../results/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Results
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lazy_fields/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lazy Fields
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="core-api">Core API<a class="headerlink" href="#core-api" title="Permanent link">&para;</a></h1>


<div class="doc doc-object doc-class">



<h2 id="ommi.database.Ommi" class="doc doc-heading">
            <code>ommi.database.Ommi</code>


<a href="#ommi.database.Ommi" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents first">


        <p>Main class for interacting with a database through a specified driver.</p>
<p>The <code>Ommi</code> class provides a high-level API for database operations, including
adding, finding, updating, and deleting records, as well as managing database
schemas and transactions. It is initialized with a database driver instance,
which dictates how it communicates with the underlying database.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="ommi.database.Ommi.driver">driver</span></code></td>
            <td>
                  <code><span title="TDriver">TDriver</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The database driver instance used for all operations.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example Usage</summary>
  <div class="highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">ommi</span><span class="w"> </span><span class="kn">import</span> <span class="n">Ommi</span><span class="p">,</span> <span class="n">ommi_model</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">ommi.ext.drivers.sqlite</span><span class="w"> </span><span class="kn">import</span> <span class="n">SQLiteDriver</span> <span class="c1"># Example driver</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">ommi.models.collections</span><span class="w"> </span><span class="kn">import</span> <span class="n">ModelCollection</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="n">collection</span> <span class="o">=</span> <span class="n">ModelCollection</span><span class="p">()</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="nd">@ommi_model</span><span class="p">(</span><span class="n">collection</span><span class="o">=</span><span class="n">collection</span><span class="p">)</span>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="k">class</span><span class="w"> </span><span class="nc">User</span><span class="p">:</span>
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>    <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span>
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>    <span class="n">driver</span> <span class="o">=</span> <span class="n">SQLiteDriver</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
</span><span id="__span-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>    <span class="k">async</span> <span class="k">with</span> <span class="n">Ommi</span><span class="p">(</span><span class="n">driver</span><span class="p">)</span> <span class="k">as</span> <span class="n">db</span><span class="p">:</span>
</span><span id="__span-0-15"><a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a>        <span class="k">await</span> <span class="n">db</span><span class="o">.</span><span class="n">use_models</span><span class="p">(</span><span class="n">collection</span><span class="p">)</span>
</span><span id="__span-0-16"><a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a>        <span class="k">await</span> <span class="n">db</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">User</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Alice&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">or_raise</span><span class="p">()</span>
</span><span id="__span-0-17"><a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a>        <span class="n">user</span> <span class="o">=</span> <span class="k">await</span> <span class="n">db</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">User</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;Alice&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">one</span><span class="o">.</span><span class="n">or_raise</span><span class="p">()</span>
</span><span id="__span-0-18"><a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Found: </span><span class="si">{</span><span class="n">user</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span></code></pre></div>
</details>









  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="ommi.database.Ommi.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">driver</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">allow_imlicit_model_setup</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

<a href="#ommi.database.Ommi.__init__" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Initializes the Ommi database interaction layer.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>driver</code>
            </td>
            <td>
                  <code><span title="TDriver">TDriver</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The database driver instance (e.g., <code>SQLiteDriver</code>, <code>PostgreSQLDriver</code>)
that Ommi will use to communicate with the database.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>allow_imlicit_model_setup</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If <code>True</code> (the default), Ommi will attempt to
automatically set up models from <code>ommi.models.collections.get_global_collection()</code>
before the first operation if no models have been explicitly registered via
<code>use_models()</code>. This can be convenient for simpler setups but might be
undesirable in complex applications where explicit schema management is preferred.
Set to <code>False</code> to disable this behavior and require explicit calls to <code>use_models()</code>.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="ommi.database.Ommi.add" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add</span><span class="p">(</span><span class="o">*</span><span class="n">models</span><span class="p">)</span></code>

<a href="#ommi.database.Ommi.add" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Persists one or more model instances to the database.</p>
<p>This method takes new model instances and attempts to save them as new records.
If implicit model setup is enabled and no models have been explicitly registered
via <code>use_models()</code>, this method will trigger the setup of the global model collection.</p>
<p>The result of the operation is wrapped in a <code>ommi.database.results.DBResult</code> type.
This allows for explicit handling of the operation's success or failure:
-   If successful, <code>DBResult.is_success</code> will be <code>True</code>, and <code>DBResult.value</code>
    will contain the added model instance(s) (potentially updated with database-generated
    values like primary keys).
-   If an error occurs, <code>DBResult.is_failure</code> will be <code>True</code>, and
    <code>DBResult.exception</code> will hold the specific exception.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>*models</code>
            </td>
            <td>
                  <code><span title="ommi.shared_types.DBModel">DBModel</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A variable number of <code>DBModel</code> instances to be added to the
     database. These should be new instances not yet persisted.</p>
              </div>
            </td>
            <td>
                  <code>()</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Awaitable">Awaitable</span>[<a class="autorefs autorefs-internal" title="ommi.database.results.DBResult" href="../results/#ommi.database.results.DBResult">DBResult</a>[<span title="ommi.shared_types.DBModel">DBModel</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An awaitable that resolves to a <code>DBResult</code>. The <code>DBResult</code> wraps the added</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Awaitable">Awaitable</span>[<a class="autorefs autorefs-internal" title="ommi.database.results.DBResult" href="../results/#ommi.database.results.DBResult">DBResult</a>[<span title="ommi.shared_types.DBModel">DBModel</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>model(s) on success or the exception on failure.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Adding a single user</summary>
  <div class="highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">ommi.database.results</span><span class="w"> </span><span class="kn">import</span> <span class="n">DBResult</span> <span class="c1"># For match/case</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Alice&quot;</span><span class="p">)</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="n">result_one</span> <span class="o">=</span> <span class="k">await</span> <span class="n">db</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="k">if</span> <span class="n">result_one</span><span class="o">.</span><span class="n">is_success</span><span class="p">:</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>    <span class="n">added_user</span> <span class="o">=</span> <span class="n">result_one</span><span class="o">.</span><span class="n">value</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Added user: </span><span class="si">{</span><span class="n">added_user</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="k">else</span><span class="p">:</span>
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to add user: </span><span class="si">{</span><span class="n">result_one</span><span class="o">.</span><span class="n">exception</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span></code></pre></div>
</details>

<details class="example" open>
  <summary>Adding multiple users</summary>
  <div class="highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="n">user1</span> <span class="o">=</span> <span class="n">User</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Alice&quot;</span><span class="p">)</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="n">user2</span> <span class="o">=</span> <span class="n">User</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Bob&quot;</span><span class="p">)</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="n">result_many</span> <span class="o">=</span> <span class="k">await</span> <span class="n">db</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">user1</span><span class="p">,</span> <span class="n">user2</span><span class="p">)</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="k">if</span> <span class="n">result_many</span><span class="o">.</span><span class="n">is_success</span><span class="p">:</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>    <span class="n">added_items</span> <span class="o">=</span> <span class="n">result_many</span><span class="o">.</span><span class="n">value</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Successfully added </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">added_items</span><span class="p">)</span><span class="si">}</span><span class="s2"> users.&quot;</span><span class="p">)</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="k">else</span><span class="p">:</span>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to add multiple users: </span><span class="si">{</span><span class="n">result_many</span><span class="o">.</span><span class="n">exception</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span></code></pre></div>
</details>

    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="ommi.database.Ommi.find" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">find</span><span class="p">(</span><span class="o">*</span><span class="n">predicates</span><span class="p">)</span></code>

<a href="#ommi.database.Ommi.find" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Initiates a query to retrieve models from the database based on specified criteria.</p>
<p>This method provides a flexible way to define conditions for your search. It returns
an <code>ommi.database.query_results.DBQueryResultBuilder</code> instance immediately.
This builder object is central to fetching data and does not execute the query
until one of its data retrieval or modification methods is called and awaited.</p>
<p>If implicit model setup is enabled and no models have been explicitly registered
via <code>use_models()</code>, this method will trigger the setup of the global model collection.</p>
<p>Available <code>DBQueryResultBuilder</code> methods:
-   <code>.all()</code>: Asynchronously fetches all matching records. On success, returns an
    <code>AsyncBatchIterator</code> via <code>DBQueryResult.value</code>.
-   <code>.one()</code>: Fetches a single record. On success, returns the record via <code>DBQueryResult.value</code>.
    Raises <code>DBStatusNoResultException</code> (accessible via <code>DBQueryResult.exception</code>)
    if no record is found.
-   <code>.count()</code>: Returns the total number of matching records as an integer via
    <code>DBQueryResult.value</code>.
-   <code>.delete()</code>: Deletes all records matching the predicates. Returns a <code>DBResult</code>
    indicating success or failure.
-   <code>.update(**values)</code> or <code>.update(values_dict)</code>: Updates fields of matching records.
    Returns a <code>DBResult</code> indicating success or failure.</p>
<p>Each of these execution methods (<code>.all()</code>, <code>.one()</code>, etc.) returns an awaitable.
When this awaitable is resolved, it yields an <code>ommi.database.query_results.DBQueryResult</code>
(for <code>.all()</code>, <code>.one()</code>, <code>.count()</code>) or an <code>ommi.database.results.DBResult</code>
(for <code>.delete()</code>, <code>.update()</code>), allowing robust outcome handling.
The <code>DBQueryResultBuilder</code> itself can also be directly awaited, defaulting to <code>.all()</code>.</p>
<blockquote>
<p><strong>Note on Predicates:</strong>
Predicates define the search criteria. You can use:
- Pythonic comparison expressions: <code>User.age &gt; 18</code>
- <code>ommi.query_ast.when()</code> for complex AND/OR logic: <code>when(User.name == "A").Or(User.age &lt; 20)</code>
- Model classes (e.g., <code>User</code>) to target all instances or provide context.</p>
</blockquote>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>*predicates</code>
            </td>
            <td>
                  <code><span title="ommi.query_ast.ASTGroupNode">ASTGroupNode</span> | <span title="ommi.shared_types.DBModel">DBModel</span> | <span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Variable number of conditions that define the query. These are
typically combined with AND logic by default (internally passed to
<code>ommi.query_ast.when(*predicates)</code>).</p>
              </div>
            </td>
            <td>
                  <code>()</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Awaitable">Awaitable</span>[<span title="ommi.database.query_results.DBQueryResultBuilder">DBQueryResultBuilder</span>[<span title="ommi.shared_types.DBModel">DBModel</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An awaitable that resolves to a <code>DBQueryResultBuilder</code>. This builder can then be</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Awaitable">Awaitable</span>[<span title="ommi.database.query_results.DBQueryResultBuilder">DBQueryResultBuilder</span>[<span title="ommi.shared_types.DBModel">DBModel</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>used to execute the query and retrieve results in various forms.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Find user by ID</summary>
  <div class="highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">ommi.query_ast</span><span class="w"> </span><span class="kn">import</span> <span class="n">when</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">ommi.database.query_results</span><span class="w"> </span><span class="kn">import</span> <span class="n">DBQueryResult</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">ommi.database.results</span><span class="w"> </span><span class="kn">import</span> <span class="n">DBResult</span><span class="p">,</span> <span class="n">DBStatusNoResultException</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="n">user_id_to_find</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="n">query_by_id</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">User</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">user_id_to_find</span><span class="p">)</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="n">result_status</span> <span class="o">=</span> <span class="k">await</span> <span class="n">query_by_id</span><span class="o">.</span><span class="n">one</span><span class="p">()</span>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="k">if</span> <span class="n">result_status</span><span class="o">.</span><span class="n">is_success</span><span class="p">:</span>
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>    <span class="n">user</span> <span class="o">=</span> <span class="n">result_status</span><span class="o">.</span><span class="n">value</span>
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Found user by ID: </span><span class="si">{</span><span class="n">user</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="k">elif</span> <span class="n">result_status</span><span class="o">.</span><span class="n">exception_is</span><span class="p">(</span><span class="n">DBStatusNoResultException</span><span class="p">):</span>
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;User with ID </span><span class="si">{</span><span class="n">user_id_to_find</span><span class="si">}</span><span class="s2"> not found.&quot;</span><span class="p">)</span>
</span><span id="__span-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="k">else</span><span class="p">:</span>
</span><span id="__span-0-15"><a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error finding user by ID: </span><span class="si">{</span><span class="n">result_status</span><span class="o">.</span><span class="n">exception</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span></code></pre></div>
</details>

<details class="example" open>
  <summary>Find users older than 18 and count them</summary>
  <div class="highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="n">older_users_query</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">User</span><span class="o">.</span><span class="n">age</span> <span class="o">&gt;</span> <span class="mi">18</span><span class="p">,</span> <span class="n">User</span><span class="o">.</span><span class="n">is_active</span> <span class="o">==</span> <span class="kc">True</span><span class="p">)</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="n">count_status</span> <span class="o">=</span> <span class="k">await</span> <span class="n">older_users_query</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="k">if</span> <span class="n">count_status</span><span class="o">.</span><span class="n">is_success</span><span class="p">:</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>    <span class="n">number_of_users</span> <span class="o">=</span> <span class="n">count_status</span><span class="o">.</span><span class="n">value</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Number of active users older than 18: </span><span class="si">{</span><span class="n">number_of_users</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="k">else</span><span class="p">:</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error counting users: </span><span class="si">{</span><span class="n">count_status</span><span class="o">.</span><span class="n">exception</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span></code></pre></div>
</details>

    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="ommi.database.Ommi.use_models" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">use_models</span><span class="p">(</span><span class="n">model_collection</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#ommi.database.Ommi.use_models" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Explicitly applies the schema for a given model collection to the database.</p>
<p>This involves first attempting to delete any existing schema for the collection
and then applying the new schema. This ensures that the database tables and
indexes match the model definitions in the provided collection.</p>
<p>This method should be called if <code>allow_implicit_model_setup</code> is <code>False</code> or if
you need to manage different sets of models explicitly.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>model_collection</code>
            </td>
            <td>
                  <code><span title="ommi.models.collections.ModelCollection">ModelCollection</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The <code>ModelCollection</code> instance whose schema (tables, indexes)
              needs to be created or updated in the database.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="ommi.database.Ommi.remove_models" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">remove_models</span><span class="p">(</span><span class="n">model_collection</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#ommi.database.Ommi.remove_models" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Removes the schema for the given model collection from the database.</p>
<p>This typically involves dropping tables associated with the models in the collection.
The collection is also removed from Ommi's set of known model collections.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>model_collection</code>
            </td>
            <td>
                  <code><span title="ommi.models.collections.ModelCollection">ModelCollection</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The <code>ModelCollection</code> whose schema should be removed
              from the database.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="ommi.database.Ommi.transaction" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">transaction</span><span class="p">()</span></code>

<a href="#ommi.database.Ommi.transaction" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Creates an asynchronous context manager for database transactions.</p>
<p>Operations performed on the <code>OmmiTransaction</code> object within the <code>async with</code>
block will be part of a single atomic transaction. The transaction is
automatically committed if the block exits successfully, or rolled back
if an unhandled exception occurs within the block.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ommi.database.OmmiTransaction (ommi.database.transaction.OmmiTransaction)" href="#ommi.database.OmmiTransaction">OmmiTransaction</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An <code>OmmiTransaction</code> instance that can be used with <code>async with</code>.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Basic transaction usage</summary>
  <div class="highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="k">async</span> <span class="k">with</span> <span class="n">db</span><span class="o">.</span><span class="n">transaction</span><span class="p">()</span> <span class="k">as</span> <span class="n">t</span><span class="p">:</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>    <span class="k">await</span> <span class="n">t</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">User</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Charlie&quot;</span><span class="p">))</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>    <span class="c1"># If an error occurs here, changes are rolled back.</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>    <span class="c1"># If all operations succeed, changes are committed.</span>
</span></code></pre></div>
</details>

<details class="example" open>
  <summary>Manual rollback within a transaction</summary>
  <div class="highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="k">try</span><span class="p">:</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>    <span class="k">async</span> <span class="k">with</span> <span class="n">db</span><span class="o">.</span><span class="n">transaction</span><span class="p">()</span> <span class="k">as</span> <span class="n">tx</span><span class="p">:</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>        <span class="k">await</span> <span class="n">tx</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">User</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Dave&quot;</span><span class="p">))</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>        <span class="k">if</span> <span class="n">some_condition_fails</span><span class="p">:</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>            <span class="k">await</span> <span class="n">tx</span><span class="o">.</span><span class="n">rollback</span><span class="p">()</span> <span class="c1"># Explicitly roll back</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>            <span class="k">await</span> <span class="n">tx</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span> <span class="c1"># Explicitly commit (optional if auto-commit on exit is desired)</span>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Transaction failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span></code></pre></div>
</details>

    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="ommi.database.Ommi.__aenter__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__aenter__</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#ommi.database.Ommi.__aenter__" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>This context manager ensures that the database connection is open
when entering the <code>async with</code> block. Using a context manager ensures that
exceptions are properly handled and resources are cleaned up automatically.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The <code>Ommi</code> instance itself.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="ommi.database.Ommi.__aexit__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__aexit__</span><span class="p">(</span><span class="o">*</span><span class="n">_</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#ommi.database.Ommi.__aexit__" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Exits the asynchronous context, closing the driver connection.</p>
<p>Ensures that the database connection managed by the driver is properly closed
when the <code>async with</code> block finishes, regardless of whether it completed
successfully or an exception occurred.</p>


    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="ommi.database.OmmiTransaction" class="doc doc-heading">
            <code>ommi.database.OmmiTransaction</code>


<a href="#ommi.database.OmmiTransaction" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents first">


        <p>An asynchronous context manager for performing database operations within a transaction.</p>
<p>This class wraps a driver-specific transaction (a <code>BaseDriverTransaction</code>)
and provides a subset of the <code>Ommi</code> class's API (like <code>add</code>, <code>find</code>, etc.).
All operations performed through an <code>OmmiTransaction</code> instance are executed
within the context of the underlying database transaction.</p>
<p>The transaction is automatically committed when the <code>async with</code> block is exited
without an unhandled exception. If an exception occurs and propagates out of
the block, the transaction is automatically rolled back.</p>
<blockquote>
<h3 id="ommi.database.OmmiTransaction--warning">Warning<a class="headerlink" href="#ommi.database.OmmiTransaction--warning" title="Permanent link">&para;</a></h3>
<p>Always use the methods on the <code>OmmiTransaction</code> instance itself
(e.g., <code>t.add(...)</code>) when inside an <code>async with t:</code> block. Calling methods
on the original <code>Ommi</code> instance from which the transaction was created will
likely result in operations being performed outside the transaction's scope.</p>
</blockquote>


<details class="example" open>
  <summary>Example</summary>
  <div class="highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="c1"># Assuming `db` is an initialized Ommi instance</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="k">async</span> <span class="k">with</span> <span class="n">db</span><span class="o">.</span><span class="n">transaction</span><span class="p">()</span> <span class="k">as</span> <span class="n">t</span><span class="p">:</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>    <span class="k">await</span> <span class="n">t</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">MyModel</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Example&quot;</span><span class="p">))</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>    <span class="c1"># Further operations like t.find(...), t.delete(...)</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>    <span class="c1"># If this block completes without error, changes are committed.</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>    <span class="c1"># If an error occurs, changes are rolled back.</span>
</span></code></pre></div>
</details>









  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="ommi.database.OmmiTransaction.transaction" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">transaction</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#ommi.database.OmmiTransaction.transaction" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Provides access to the underlying driver-specific transaction object.</p>
<p>While most operations should be performed via the <code>OmmiTransaction</code>'s own
methods (like <code>add</code>, <code>find</code>), this property allows access to the raw driver
transaction if needed for driver-specific functionalities not exposed directly
by <code>OmmiTransaction</code>.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ommi.drivers.BaseDriverTransaction" href="../drivers/#ommi.drivers.BaseDriverTransaction">BaseDriverTransaction</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The <code>BaseDriverTransaction</code> instance being wrapped.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>



<div class="doc doc-object doc-function">


<h3 id="ommi.database.OmmiTransaction.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">transaction</span><span class="p">)</span></code>

<a href="#ommi.database.OmmiTransaction.__init__" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">



<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>transaction</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="ommi.drivers.BaseDriverTransaction" href="../drivers/#ommi.drivers.BaseDriverTransaction">BaseDriverTransaction</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The driver-specific <code>BaseDriverTransaction</code> object that
         this OmmiTransaction will manage.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="ommi.database.OmmiTransaction.add" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add</span><span class="p">(</span><span class="o">*</span><span class="n">models</span><span class="p">)</span></code>

<a href="#ommi.database.OmmiTransaction.add" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Adds one or more model instances to the database within the current transaction.</p>
<p>This method delegates to the underlying driver transaction's <code>add</code> method.
The behavior is analogous to <code>ommi.Ommi.add</code> but occurs within the transactional
context.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>*models</code>
            </td>
            <td>
                  <code><span title="ommi.shared_types.DBModel">DBModel</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The <code>DBModel</code> instances to be added.</p>
              </div>
            </td>
            <td>
                  <code>()</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Awaitable">Awaitable</span>[<a class="autorefs autorefs-internal" title="ommi.database.results.DBResult" href="../results/#ommi.database.results.DBResult">DBResult</a>[<span title="ommi.shared_types.DBModel">DBModel</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An awaitable that resolves to a <code>ommi.database.results.DBResult</code>.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Awaitable">Awaitable</span>[<a class="autorefs autorefs-internal" title="ommi.database.results.DBResult" href="../results/#ommi.database.results.DBResult">DBResult</a>[<span title="ommi.shared_types.DBModel">DBModel</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>This result object will contain the added models (potentially with updated,</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Awaitable">Awaitable</span>[<a class="autorefs autorefs-internal" title="ommi.database.results.DBResult" href="../results/#ommi.database.results.DBResult">DBResult</a>[<span title="ommi.shared_types.DBModel">DBModel</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>database-generated fields like primary keys) on success, or an exception</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Awaitable">Awaitable</span>[<a class="autorefs autorefs-internal" title="ommi.database.results.DBResult" href="../results/#ommi.database.results.DBResult">DBResult</a>[<span title="ommi.shared_types.DBModel">DBModel</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>on failure.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="ommi.database.OmmiTransaction.find" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">find</span><span class="p">(</span><span class="o">*</span><span class="n">predicates</span><span class="p">)</span></code>

<a href="#ommi.database.OmmiTransaction.find" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Initiates a query to find models in the database within the current transaction.</p>
<p>This method delegates to the underlying driver transaction to build a query.
It returns a <code>ommi.database.query_results.DBQueryResultBuilder</code>, allowing for
fluent construction and execution of the query (e.g., <code>.all()</code>, <code>.one()</code>, <code>.count()</code>).
The behavior is analogous to <code>ommi.Ommi.find</code> but occurs within the transactional
context.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>*predicates</code>
            </td>
            <td>
                  <code><span title="ommi.query_ast.ASTGroupNode">ASTGroupNode</span> | <span title="ommi.shared_types.DBModel">DBModel</span> | <span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Query conditions, typically involving model fields or <code>ASTGroupNode</code>
         instances created with <code>ommi.query_ast.when()</code>.</p>
              </div>
            </td>
            <td>
                  <code>()</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Awaitable">Awaitable</span>[<span title="ommi.database.query_results.DBQueryResultBuilder">DBQueryResultBuilder</span>[<span title="ommi.shared_types.DBModel">DBModel</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An awaitable that resolves to a <code>DBQueryResultBuilder</code> for executing the query</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Awaitable">Awaitable</span>[<span title="ommi.database.query_results.DBQueryResultBuilder">DBQueryResultBuilder</span>[<span title="ommi.shared_types.DBModel">DBModel</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>within the transaction.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="ommi.database.OmmiTransaction.use_models" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">use_models</span><span class="p">(</span><span class="n">model_collection</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#ommi.database.OmmiTransaction.use_models" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Applies the schema for a model collection within the current transaction.</p>
<p>This involves deleting any existing schema for the collection and then applying
the new one, all within the transaction's scope. If the transaction is later
rolled back, these schema changes will also be reverted (if the database supports
transactional DDL).</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>model_collection</code>
            </td>
            <td>
                  <code><span title="ommi.models.collections.ModelCollection">ModelCollection</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The <code>ModelCollection</code> whose schema needs to be applied.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="ommi.database.OmmiTransaction.remove_models" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">remove_models</span><span class="p">(</span><span class="n">model_collection</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#ommi.database.OmmiTransaction.remove_models" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Removes the schema for a model collection from the database within the transaction.</p>
<p>This operation is performed within the transaction's scope. If the transaction
is rolled back, the schema removal may also be reverted (database-dependent).</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>model_collection</code>
            </td>
            <td>
                  <code><span title="ommi.models.collections.ModelCollection">ModelCollection</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The <code>ModelCollection</code> whose schema is to be removed.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="ommi.database.OmmiTransaction.commit" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">commit</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#ommi.database.OmmiTransaction.commit" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Explicitly commits the current transaction.</p>
<p>Once committed, all changes made within the transaction become permanent.
It is often not necessary to call this directly, as the transaction will
auto-commit upon successful exit from the <code>async with</code> block.
However, it can be used for finer-grained control within the block.</p>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="ommi.database.OmmiTransaction.rollback" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">rollback</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#ommi.database.OmmiTransaction.rollback" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Explicitly rolls back the current transaction.</p>
<p>This discards all changes made within the transaction since it began or since
the last commit. If an exception occurs within the <code>async with</code> block, the
transaction will typically auto-rollback, making direct calls to this method
necessary only in specific control-flow scenarios.</p>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="ommi.database.OmmiTransaction.__aenter__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__aenter__</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#ommi.database.OmmiTransaction.__aenter__" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Enters the asynchronous context, starting the underlying driver transaction.</p>
<p>This method is called when entering an <code>async with</code> block. It delegates
to the wrapped driver transaction, which typically starts a new transaction.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The <code>OmmiTransaction</code> instance itself, allowing it to be used as the</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>target of the <code>as</code> clause in the <code>async with</code> statement.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="ommi.database.OmmiTransaction.__aexit__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__aexit__</span><span class="p">(</span><span class="n">exc_type</span><span class="p">,</span> <span class="n">exc_val</span><span class="p">,</span> <span class="n">exc_tb</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#ommi.database.OmmiTransaction.__aexit__" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Exits the asynchronous context, committing or rolling back the transaction.</p>
<p>This method is called when exiting the <code>async with</code> block. It delegates to
the wrapped driver transaction.
Typically, the driver transaction will:</p>
<ul>
<li>Commit if <code>exc_type</code> is <code>None</code> (no exception occurred).</li>
<li>Roll back if <code>exc_type</code> is not <code>None</code> (an exception occurred).</li>
</ul>


    </div>

</div>



  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2024 Your Name/Project Name
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.sections", "navigation.expand", "navigation.top", "search.suggest", "search.highlight", "content.code.annotate", "content.code.copy", "content.tabs.link", "toc.integrate"], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
    
  </body>
</html>